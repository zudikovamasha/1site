<!doctype html>
<html lang="ru">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Lab 4</title>
  <style>
    td {
      border: 1px;
      border-color: grey;
      border-style: double;
    }

    td>div {
      width: 3em;
      height: 3em;
      text-align: center;
      vertical-align: middle;
      display: table-cell;
    }

    td>div.busy {
      color: white;
      background-color: black;
    }

    td>div.free {
      color: grey;
      background-color: grey;
    }
  </style>
  <script>
    function swapCells(busyID, freeID) {
      if (busyID == freeID) { return }
      var b = document.getElementById(busyID);
      var f = document.getElementById(freeID);
      var txt = b.innerText;
      b.innerText = "+";
      b.className = "free";
      f.innerText = txt;
      f.className = "busy"
    }
    function getFreeID(r, c) {
      if (1 <= r && r <= 4 && 1 <= c && c <= 4) {
        var freeID = String(r) + String(c);
        var f = document.getElementById(freeID);
        var t = f.innerText;
        if (t == '+') { return freeID }
      }
      return ''
    }
    function moveCell(busyID) {
      var r = Number(busyID[0]);
      var c = Number(busyID[1]);
      var freeID = getFreeID(r, c);
      if (freeID != '') {
        return
      }
      freeID = getFreeID(r + 1, c);
      if (freeID != '') {
        swapCells(busyID, freeID);
        return
      }
      freeID = getFreeID(r - 1, c);
      if (freeID != '') {
        swapCells(busyID, freeID);
        return
      }
      freeID = getFreeID(r, c + 1);
      if (freeID != '') {
        swapCells(busyID, freeID);
        return
      }
      freeID = getFreeID(r, c - 1);
      if (freeID != '') {
        swapCells(busyID, freeID);
        return
      }
    }
    function click15(rc) {
      moveCell(rc)
    }
  </script>
</head>

<body>
  <table>
    <tr>
      <td>
        <div id="11" onclick="click15('11')" class="busy">1</div>
      </td>
      <td>
        <div id="12" onclick="click15('12')" class="busy">5</div>
      </td>
      <td>
        <div id="13" onclick="click15('13')" class="busy">9</div>
      </td>
      <td>
        <div id="14" onclick="click15('14')" class="busy">13</div>
      </td>
    </tr>
    <tr>
      <td>
        <div id="21" onclick="click15('21')" class="busy">2</div>
      </td>
      <td>
        <div id="22" onclick="click15('22')" class="busy">6</div>
      </td>
      <td>
        <div id="23" onclick="click15('23')" class="busy">10</div>
      </td>
      <td>
        <div id="24" onclick="click15('24')" class="busy">14</div>
      </td>
    </tr>
    <tr>
      <td>
        <div id="31" onclick="click15('31')" class="busy">3</div>
      </td>
      <td>
        <div id="32" onclick="click15('32')" class="busy">7</div>
      </td>
      <td>
        <div id="33" onclick="click15('33')" class="busy">11</div>
      </td>
      <td>
        <div id="34" onclick="click15('34')" class="busy">15</div>
      </td>
    </tr>
    <tr>
      <td>
        <div id="41" onclick="click15('41')" class="busy">4</div>
      </td>
      <td>
        <div id="42" onclick="click15('42')" class="busy">8</div>
      </td>
      <td>
        <div id="43" onclick="click15('43')" class="busy">12</div>
      </td>
      <td>
        <div id="44" onclick="click15('44')" class="free">+</div>
      </td>
    </tr>
  </table>
</body>

</html>